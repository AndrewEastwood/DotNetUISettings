{"name":"DotNET UI Settings","tagline":"Transfer control's values into xml settings file","body":"DotNET UI Settings [![Build Status](https://travis-ci.org/AndrewEastwood/DotNetUISettings.svg?branch=master)](https://travis-ci.org/AndrewEastwood/DotNetUISettings)\r\n==================\r\n\r\nSimply it's UI to XML :)\r\n\r\nIf you want to have xml configuration used in your project and you do not prefer default dotNet Properties functionality so this might be helpful for you.\r\nUsing this component you will be able to save and restore control's values into standard readable xml file.\r\nAdditionaly it supports mutiple configuration profiles within the single project.\r\n\r\nSo, how to use this stuff:\r\n\r\n1. Add reference to \"components\" libarary into your project\r\n\r\n2. Create an empty public class\r\n\r\n```\r\n    public class wndSettings\r\n    {\r\n    }\r\n```\r\n\r\n\r\n3. Add inheritance to this class\r\n\r\n```\r\n    public class wndSettings : components.UI.Windows.wndAppSettings.wndAppSettings\r\n    {\r\n    }\r\n    \r\n```\r\n\r\n\r\n4. Refresh your solution explorer and you will see that the created class becomes a form\r\n\r\n5. Open the 'wndSettings' in the designer\r\n\r\n6. Add textBox control with the following name: \"test_textBox1\"\r\n\r\n7. Add \"Save\" button, and add onClick handler. Drop the following lines into the onClick handler:\r\n\r\n```\r\n        private void save_Click(object sender, EventArgs e)\r\n        {\r\n            this.DialogResult = System.Windows.Forms.DialogResult.OK;\r\n            this.Close();\r\n        }\r\n```\r\n\r\n8. Make sure that you have the \"SaveSettingsOnClose\" property enabled for your settings form (wndSettings)\r\n\r\n9. Then opend the 'wndSettings' form source add modify it's constructor:\r\n\r\n```\r\n        public wndSettings()\r\n            : base()\r\n        {\r\n            InitializeComponent(); // <==== we must add this to override base settings form with our custom controls and form properties\r\n        }\r\n```\r\n\r\nAlright. We have configured settings window that can save it's own textBox control value into settings file.\r\nLet's compile our test application and see what happen.\r\nOnce we have the settings window opened type smth into textBox and hit the \"Save\" button.\r\nThen navigate into your app directory and you have to see new \"config\" directory with one file \"test.xml\".\r\nIf you open this file you have see the following:\r\n```\r\n<document name=\"test\" version=\"1.6.1\">\r\n    <property name=\"textBox1\" value=\"\" />\r\n</document>\r\n```\r\n\r\nThe document's name is the same as the file name and related to first part of control name \"test_textBox1\"; (it's \"test\")\r\nThen inside the document there are all proprties related to \"test\" document.\r\nIf you add another textbox or whatever which name starts with \"test_\" their values will be added into this \"test.xml\" document.\r\nYou can have as much as you want documents with control values, just add control that starts with different name, like this \"network_proxy\", and you will get new file \"network.xml\" with the one peroperty \"proxy\"\r\n\r\nNow we have to configure settings import to our application.\r\n10. Let's open Program.cs file and add dependencies:\r\n```\r\nusing components.Public;\r\n```\r\n\r\n11. And finnaly add this into the \"Main\" function\r\n\r\n```\r\n    ApplicationConfiguration.Instance.LoadConfigurationData();\r\n```\r\n\r\nCompile your application and enjoy! :)\r\n\r\n\r\nControl name convention.\r\n\r\nYou must use the char \"_\" to separate folding blocks of the property. The last part of the name that goes after last \"_\" is the property name. So if you have a textbox control with the name \"demo_general_name\" then you will get the following:\r\n```\r\nFile name: demo.xml\r\n<document name=\"demo\" version=\"1.6.1\">\r\n    <section name=\"general\">\r\n        <property name=\"textBox1\" value=\"\" />\r\n    </section>\r\n</document>\r\n```\r\n\r\nIt's because you have \"demo\" and \"general\" and then \"name\".\r\n","google":"UA-49277396-1","note":"Don't delete this file! It's used internally to help with page regeneration."}